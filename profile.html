<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Your Profile - uniQue-ue</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts (Inter & Orbitron) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=Orbitron:wght@700;800;900&display=swap" rel="stylesheet">
    
    <!-- Our New Global Stylesheet -->
    <link rel="stylesheet" href="style.css">
    
    <!-- Firebase & Main App Logic -->
    <!-- We use type="module" to enable import/export -->
    <script src="firebase-config.js" type="module"></script>
    <script src="app.js" type="module"></script>
    
    <!-- We'll keep the old logo files for now -->
    <link rel="icon" href="uniQ_logo_sm2T.png" type="image/png">
</head>

<body>
    <!-- Fixed background particle canvas -->
    <canvas id="particle-canvas" class="particle-canvas"></canvas>
    
    <!-- 
      Page Wrapper
      This holds all content and sits on top of the particle canvas.
      It has padding-top to account for the 80px fixed header.
    -->
    <div class="page-wrapper">
    
        <!-- Global Header Component -->
        <!-- app.js will load _header.html into this div -->
        <div id="header-placeholder">
            <!-- Skeleton loader for the header -->
            <div class="fixed top-0 left-0 right-0 z-50 h-20 bg-brand-secondary/50 backdrop-blur-md animate-pulse"></div>
        </div>
        
        <!-- 
          Main Content
          The unique content for each page will be placed inside this <main> tag.
        -->
        <main class="container mx-auto px-6 py-12">
            tag.
        -->
        <main class="container mx-auto px-6 py-12">
            tag.
        -->
        <main class="container mx-auto px-6 py-12">
            <div class="container mx-auto p-8">
        <h1 class="text-4xl font-display mb-8">Your Profile</h1>
        
        <div id="auth-container">
            <!-- This content will be shown/hidden based on auth state -->
            <p>Please log in to view your profile.</p>
        </div>
        
        <div id="profile-content" class="hidden">
            <p>Welcome, <span id="user-name">...</span></p>
            <!-- TODO: Add profile fields: picture, user ID, etc. -->
            
            <h2 class="text-3xl font-display mt-12 mb-4">Your Subscriptions</h2>
            <!-- TODO: Add subscription management -->
            
            <button id="logout-button">Log Out</button>
        </div>
    </div>
    
    
    
    <script type="module">
        import { auth, db } from './firebase-config.js';
        import { onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";

        const authContainer = document.getElementById('auth-container');
        const profileContent = document.getElementById('profile-content');
        const userName = document.getElementById('user-name');
        const logoutButton = document.getElementById('logout-button');

        // Listen for auth state changes
        onAuthStateChanged(auth, (user) => {
            if (user) {
                // User is signed in
                authContainer.classList.add('hidden');
                profileContent.classList.remove('hidden');
                userName.textContent = user.displayName || user.email;
            } else {
                // User is signed out
                authContainer.classList.remove('hidden');
                profileContent.classList.add('hidden');
                // Redirect to login page or show login form
            }
        });

        // Log out
        logoutButton.addEventListener('click', async () => {
            try {
                await signOut(auth);
                console.log('User signed out');
            } catch (error) {
                console.error('Sign out error', error);
            }
        });
    </script>
        </main>
        
        <!-- Global Footer Component -->
        <!-- app.js will load _footer.html into this div -->
        <div id="footer-placeholder">
            <!-- Skeleton loader for the footer -->
            <div class="h-32 w-full bg-brand-primary border-t border-brand-accent/10 animate-pulse"></div>
        </div>
        
    </div>
</body>

</html>