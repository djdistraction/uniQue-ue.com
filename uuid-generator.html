<!DOCTYPE html>
<html lang="en">
<head>
    <base href="/">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UUID Generator - uniQue-ue</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=Orbitron:wght@700;800;900&display=swap" rel="stylesheet">
    
    <!-- Global Stylesheet -->
    <link rel="stylesheet" href="style.css">
    
    <!-- Firebase & Main App Logic -->
    <script src="firebase-config.js" type="module"></script>
    <script src="app.js" type="module"></script>
    
    <link rel="icon" href="uniQ_logo_sm2T.png" type="image/png">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        . uuid-card {
            background: rgba(16, 20, 44, 0.95);
            border: 1px solid rgba(0, 246, 255, 0.2);
            border-radius: 0.5rem;
            padding: 1rem;
            margin-bottom: 0.75rem;
            transition: all 0.3s ease;
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 1rem;
        }
        
        .uuid-card:hover {
            border-color: rgba(0, 246, 255, 0.5);
            background: rgba(16, 20, 44, 1);
            transform: translateX(4px);
        }
        
        .uuid-text {
            font-family: 'Courier New', monospace;
            color: var(--brand-text);
            font-size: 0.95rem;
            flex: 1;
            word-break: break-all;
        }
        
        .uuid-actions {
            display: flex;
            gap: 0.5rem;
        }
        
        .btn {
            padding: 0.75rem 1.5rem;
            border-radius: 0.375rem;
            font-weight: 600;
            transition: all 0.3s ease;
            border: none;
            cursor: pointer;
            font-size: 0.875rem;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .btn-primary {
            background: linear-gradient(145deg, var(--brand-accent), rgba(0, 246, 255, 0.8));
            color: var(--brand-primary);
        }
        
        .btn-primary:hover {
            background: linear-gradient(145deg, var(--brand-accent-hover), var(--brand-accent));
            box-shadow: 0 0 15px rgba(0, 246, 255, 0.5);
        }
        
        .btn-secondary {
            background: rgba(0, 246, 255, 0.1);
            color: var(--brand-accent);
            border: 1px solid var(--brand-accent);
        }
        
        .btn-secondary:hover {
            background:  rgba(0, 246, 255, 0.2);
        }
        
        .btn-icon {
            background: rgba(0, 246, 255, 0.1);
            border:  1px solid rgba(0, 246, 255, 0.3);
            color: var(--brand-accent);
            padding: 0.5rem;
            border-radius: 0.25rem;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 0.875rem;
        }
        
        .btn-icon:hover {
            background: rgba(0, 246, 255, 0.2);
            border-color: var(--brand-accent);
        }
        
        .control-panel {
            background: rgba(16, 20, 44, 0.95);
            border: 1px solid rgba(0, 246, 255, 0.2);
            border-radius: 0.5rem;
            padding: 1.5rem;
        }
        
        .control-group {
            margin-bottom: 1.5rem;
        }
        
        .control-label {
            display: block;
            color: var(--brand-text);
            font-weight: 600;
            margin-bottom: 0.5rem;
            font-size: 0.875rem;
        }
        
        .control-input {
            width: 100%;
            background: rgba(2, 4, 24, 0.8);
            border: 1px solid rgba(0, 246, 255, 0.2);
            border-radius: 0.375rem;
            padding: 0.75rem;
            color: var(--brand-text);
            font-size: 0.875rem;
        }
        
        .control-input:focus {
            outline:  none;
            border-color:  var(--brand-accent);
        }
        
        .radio-group {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
        }
        
        .radio-option {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            cursor: pointer;
            padding:  0.5rem 1rem;
            background: rgba(2, 4, 24, 0.5);
            border: 1px solid rgba(0, 246, 255, 0.2);
            border-radius: 0.375rem;
            transition: all 0.2s ease;
        }
        
        . radio-option:hover {
            border-color: var(--brand-accent);
            background: rgba(2, 4, 24, 0.8);
        }
        
        .radio-option input[type="radio"] {
            accent-color: var(--brand-accent);
        }
        
        .checkbox-option {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            cursor: pointer;
        }
        
        .checkbox-option input[type="checkbox"] {
            accent-color: var(--brand-accent);
            width: 18px;
            height: 18px;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1rem;
            margin-bottom: 1.5rem;
        }
        
        .stat-card {
            background: rgba(2, 4, 24, 0.8);
            border: 1px solid rgba(0, 246, 255, 0.2);
            border-radius: 0.375rem;
            padding: 1rem;
            text-align: center;
        }
        
        .stat-value {
            font-size: 1.5rem;
            font-weight:  700;
            color: var(--brand-accent);
            font-family: 'Orbitron', sans-serif;
        }
        
        .stat-label {
            font-size: 0.75rem;
            color: var(--brand-text-muted);
            text-transform: uppercase;
            margin-top: 0.25rem;
        }
        
        .empty-state {
            text-align: center;
            padding: 3rem 1rem;
            color: var(--brand-text-muted);
        }
        
        .empty-state i {
            font-size: 3rem;
            margin-bottom:  1rem;
            opacity: 0.3;
        }
    </style>
</head>

<body>
    <!-- Fixed background particle canvas -->
    <canvas id="particle-canvas" class="particle-canvas"></canvas>
    
    <!-- Page Wrapper -->
    <div class="page-wrapper">
    
        <!-- Global Header Component -->
        <div id="header-placeholder">
            <div class="fixed top-0 left-0 right-0 z-50 h-20 bg-brand-secondary/50 backdrop-blur-md animate-pulse"></div>
        </div>

        <!-- Main Content -->
        <main class="flex-grow">
            <div class="container mx-auto px-6 py-12 md:py-20">
                
                <!-- Hero Section -->
                <div class="text-center mb-12 animate-fade-in-up">
                    <h1 class="text-4xl md: text-5xl font-display font-bold mb-4 heading-glow">
                        <i class="fas fa-random text-brand-accent mr-3"></i>
                        UUID Generator
                    </h1>
                    <p class="text-xl text-brand-text-muted max-w-3xl mx-auto">
                        Generate universally unique identifiers with various versions and formats
                    </p>
                </div>

                <div class="grid lg:grid-cols-3 gap-8">
                    
                    <!-- Left Column:  Controls -->
                    <div class="lg:col-span-1">
                        <div class="control-panel">
                            <h3 class="text-xl font-display font-bold mb-4 text-brand-accent">Settings</h3>
                            
                            <!-- UUID Version -->
                            <div class="control-group">
                                <label class="control-label">UUID Version</label>
                                <div class="radio-group">
                                    <label class="radio-option">
                                        <input type="radio" name="version" value="v4" checked>
                                        <span>v4 (Random)</span>
                                    </label>
                                    <label class="radio-option">
                                        <input type="radio" name="version" value="v1">
                                        <span>v1 (Timestamp)</span>
                                    </label>
                                </div>
                                <p class="text-xs text-brand-text-muted mt-2">
                                    v4: Random-based | v1: Time-based
                                </p>
                            </div>

                            <!-- Quantity -->
                            <div class="control-group">
                                <label class="control-label" for="quantity">Quantity</label>
                                <input 
                                    type="number" 
                                    id="quantity" 
                                    class="control-input" 
                                    value="1" 
                                    min="1" 
                                    max="1000"
                                >
                                <p class="text-xs text-brand-text-muted mt-2">
                                    Generate 1-1000 UUIDs at once
                                </p>
                            </div>

                            <!-- Format Options -->
                            <div class="control-group">
                                <label class="control-label">Format Options</label>
                                <label class="checkbox-option mb-2">
                                    <input type="checkbox" id="uppercase">
                                    <span>Uppercase</span>
                                </label>
                                <label class="checkbox-option mb-2">
                                    <input type="checkbox" id="nohyphens">
                                    <span>Remove Hyphens</span>
                                </label>
                                <label class="checkbox-option">
                                    <input type="checkbox" id="braces">
                                    <span>Add Braces {}</span>
                                </label>
                            </div>

                            <!-- Generate Button -->
                            <button class="btn btn-primary w-full" onclick="generateUUIDs()">
                                <i class="fas fa-magic"></i> Generate UUIDs
                            </button>
                        </div>

                        <!-- Statistics -->
                        <div class="control-panel mt-6">
                            <h3 class="text-xl font-display font-bold mb-4 text-brand-accent">Statistics</h3>
                            <div class="stats-grid">
                                <div class="stat-card">
                                    <div class="stat-value" id="totalGenerated">0</div>
                                    <div class="stat-label">Generated</div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-value" id="currentCount">0</div>
                                    <div class="stat-label">Current</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Right Column: Results -->
                    <div class="lg:col-span-2">
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="text-xl font-display font-bold text-brand-accent">Generated UUIDs</h3>
                            <div class="flex gap-2">
                                <button class="btn btn-secondary" onclick="copyAll()" id="copyAllBtn" style="display: none;">
                                    <i class="fas fa-copy"></i> Copy All
                                </button>
                                <button class="btn btn-secondary" onclick="downloadAll()" id="downloadBtn" style="display: none;">
                                    <i class="fas fa-download"></i> Download
                                </button>
                                <button class="btn btn-secondary" onclick="clearAll()" id="clearBtn" style="display: none;">
                                    <i class="fas fa-trash"></i> Clear
                                </button>
                            </div>
                        </div>

                        <!-- UUID List -->
                        <div id="uuidList" class="max-h-[600px] overflow-y-auto">
                            <div class="empty-state">
                                <i class="fas fa-random"></i>
                                <p>No UUIDs generated yet</p>
                                <p class="text-sm mt-2">Configure settings and click "Generate UUIDs"</p>
                            </div>
                        </div>

                        <!-- Validation Section -->
                        <div class="control-panel mt-6">
                            <h3 class="text-xl font-display font-bold mb-4 text-brand-accent">UUID Validator</h3>
                            <div class="flex gap-2">
                                <input 
                                    type="text" 
                                    id="validateInput" 
                                    class="control-input flex-1" 
                                    placeholder="Paste UUID to validate..."
                                >
                                <button class="btn btn-secondary" onclick="validateUUID()">
                                    <i class="fas fa-check-circle"></i> Validate
                                </button>
                            </div>
                            <div id="validationResult" class="mt-3"></div>
                        </div>
                    </div>
                </div>

                <!-- Features Section -->
                <div class="mt-16">
                    <h2 class="text-3xl font-display font-bold mb-6 text-brand-accent text-center">Features</h2>
                    <div class="grid md:grid-cols-4 gap-6">
                        <div class="text-center p-6 bg-brand-secondary/30 rounded-lg border border-brand-accent/20">
                            <i class="fas fa-random text-4xl text-brand-accent mb-4"></i>
                            <h3 class="font-bold mb-2">Multiple Versions</h3>
                            <p class="text-brand-text-muted text-sm">Support for UUID v1 and v4</p>
                        </div>
                        <div class="text-center p-6 bg-brand-secondary/30 rounded-lg border border-brand-accent/20">
                            <i class="fas fa-layer-group text-4xl text-brand-accent mb-4"></i>
                            <h3 class="font-bold mb-2">Bulk Generation</h3>
                            <p class="text-brand-text-muted text-sm">Generate up to 1000 UUIDs at once</p>
                        </div>
                        <div class="text-center p-6 bg-brand-secondary/30 rounded-lg border border-brand-accent/20">
                            <i class="fas fa-sliders-h text-4xl text-brand-accent mb-4"></i>
                            <h3 class="font-bold mb-2">Format Options</h3>
                            <p class="text-brand-text-muted text-sm">Customize case, hyphens, and braces</p>
                        </div>
                        <div class="text-center p-6 bg-brand-secondary/30 rounded-lg border border-brand-accent/20">
                            <i class="fas fa-check-double text-4xl text-brand-accent mb-4"></i>
                            <h3 class="font-bold mb-2">Validation</h3>
                            <p class="text-brand-text-muted text-sm">Validate existing UUID strings</p>
                        </div>
                    </div>
                </div>

            </div>
        </main>

        <!-- Global Footer Component -->
        <div id="footer-placeholder">
            <div class="h-32 w-full bg-brand-primary border-t border-brand-accent/10 animate-pulse"></div>
        </div>
        
    </div>

    <!-- Page JavaScript -->
    <script type="module">
        import { auth, db } from './firebase-config.js';
        import { doc, setDoc, getDoc, updateDoc, increment } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js';
        import { onAuthStateChanged } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-auth. js';

        let currentUser = null;
        let generatedUUIDs = [];
        let totalGenerated = 0;

        // Auth state listener
        onAuthStateChanged(auth, (user) => {
            currentUser = user;
            if (user) {
                loadStats();
            }
        });

        // Generate UUID v4
        function generateUUIDv4() {
            return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {
                const r = Math.random() * 16 | 0;
                const v = c === 'x' ? r : (r & 0x3 | 0x8);
                return v.toString(16);
            });
        }

        // Generate UUID v1 (simplified timestamp-based)
        function generateUUIDv1() {
            const now = Date.now();
            const random = Math.random().toString(16).substring(2, 15);
            const timeLow = (now & 0xffffffff).toString(16).padStart(8, '0');
            const timeMid = ((now >> 32) & 0xffff).toString(16).padStart(4, '0');
            const timeHi = (((now >> 48) & 0x0fff) | 0x1000).toString(16).padStart(4, '0');
            const clockSeq = (Math.random() * 0x3fff | 0x8000).toString(16).padStart(4, '0');
            const node = random. padStart(12, '0');
            
            return `${timeLow}-${timeMid}-${timeHi}-${clockSeq. substring(0, 4)}-${node}`;
        }

        // Format UUID
        function formatUUID(uuid) {
            const uppercase = document.getElementById('uppercase').checked;
            const nohyphens = document.getElementById('nohyphens').checked;
            const braces = document.getElementById('braces').checked;
            
            let formatted = uuid;
            
            if (uppercase) {
                formatted = formatted.toUpperCase();
            }
            
            if (nohyphens) {
                formatted = formatted.replace(/-/g, '');
            }
            
            if (braces) {
                formatted = `{${formatted}}`;
            }
            
            return formatted;
        }

        // Generate UUIDs
        window.generateUUIDs = function() {
            const version = document.querySelector('input[name="version"]: checked').value;
            const quantity = parseInt(document.getElementById('quantity').value);
            
            if (quantity < 1 || quantity > 1000) {
                alert('Please enter a quantity between 1 and 1000');
                return;
            }

            generatedUUIDs = [];
            
            for (let i = 0; i < quantity; i++) {
                const uuid = version === 'v4' ? generateUUIDv4() : generateUUIDv1();
                generatedUUIDs.push(formatUUID(uuid));
            }

            displayUUIDs();
            updateStats(quantity);
            saveStatsToFirestore(quantity);
        };

        // Display UUIDs
        function displayUUIDs() {
            const list = document.getElementById('uuidList');
            
            if (generatedUUIDs.length === 0) {
                list.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-random"></i>
                        <p>No UUIDs generated yet</p>
                        <p class="text-sm mt-2">Configure settings and click "Generate UUIDs"</p>
                    </div>
                `;
                document.getElementById('copyAllBtn').style.display = 'none';
                document.getElementById('downloadBtn').style.display = 'none';
                document. getElementById('clearBtn').style.display = 'none';
                return;
            }

            list. innerHTML = generatedUUIDs.map((uuid, index) => `
                <div class="uuid-card">
                    <span class="uuid-text">${uuid}</span>
                    <div class="uuid-actions">
                        <button class="btn-icon" onclick="copyUUID(${index})" title="Copy">
                            <i class="fas fa-copy"></i>
                        </button>
                    </div>
                </div>
            `).join('');

            document.getElementById('copyAllBtn').style.display = 'inline-flex';
            document.getElementById('downloadBtn').style.display = 'inline-flex';
            document. getElementById('clearBtn').style.display = 'inline-flex';
        }

        // Copy single UUID
        window.copyUUID = function(index) {
            const uuid = generatedUUIDs[index];
            navigator.clipboard.writeText(uuid).then(() => {
                // Visual feedback
                showToast('UUID copied to clipboard! ');
            });
        };

        // Copy all UUIDs
        window. copyAll = function() {
            const text = generatedUUIDs.join('\n');
            navigator.clipboard.writeText(text).then(() => {
                showToast(`Copied ${generatedUUIDs.length} UUIDs to clipboard!`);
            });
        };

        // Download all UUIDs
        window.downloadAll = function() {
            const text = generatedUUIDs.join('\n');
            const blob = new Blob([text], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document. createElement('a');
            a.href = url;
            a. download = `uuids_${Date.now()}.txt`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            showToast('UUIDs downloaded successfully!');
        };

        // Clear all
        window.clearAll = function() {
            generatedUUIDs = [];
            displayUUIDs();
            document.getElementById('currentCount').textContent = '0';
        };

        // Validate UUID
        window.validateUUID = function() {
            const input = document. getElementById('validateInput').value. trim();
            const result = document.getElementById('validationResult');
            
            if (! input) {
                result.innerHTML = '<p class="text-brand-text-muted text-sm">Enter a UUID to validate</p>';
                return;
            }

            // UUID regex patterns
            const v4Pattern = /^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i;
            const v1Pattern = /^[0-9a-f]{8}-[0-9a-f]{4}-1[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i;
            const nohyphensPattern = /^[0-9a-f]{32}$/i;
            const bracesPattern = /^\{[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}\}$/i;

            let cleanInput = input.replace(/[{}]/g, '');
            
            let isValid = false;
            let version = 'Unknown';
            
            if (v4Pattern.test(cleanInput)) {
                isValid = true;
                version = 'v4 (Random)';
            } else if (v1Pattern.test(cleanInput)) {
                isValid = true;
                version = 'v1 (Timestamp)';
            } else if (nohyphensPattern.test(cleanInput)) {
                isValid = true;
                version = 'Valid (no hyphens)';
            } else if (bracesPattern.test(input)) {
                isValid = true;
                version = 'Valid (with braces)';
            }

            if (isValid) {
                result.innerHTML = `
                    <div style="background:  rgba(152, 195, 121, 0.1); border: 1px solid rgba(152, 195, 121, 0.3); border-radius: 0.375rem; padding: 1rem;">
                        <p style="color: #98c379; font-weight: 600;">✓ Valid UUID</p>
                        <p style="color: var(--brand-text-muted); font-size: 0.875rem; margin-top: 0.5rem;">Version: ${version}</p>
                    </div>
                `;
            } else {
                result.innerHTML = `
                    <div style="background:  rgba(224, 108, 117, 0.1); border: 1px solid rgba(224, 108, 117, 0.3); border-radius: 0.375rem; padding: 1rem;">
                        <p style="color: #e06c75; font-weight: 600;">✗ Invalid UUID</p>
                        <p style="color: var(--brand-text-muted); font-size: 0.875rem; margin-top: 0.5rem;">Please check the format and try again</p>
                    </div>
                `;
            }
        };

        // Update stats
        function updateStats(count) {
            totalGenerated += count;
            document.getElementById('totalGenerated').textContent = totalGenerated;
            document.getElementById('currentCount').textContent = generatedUUIDs.length;
        }

        // Save stats to Firestore
        async function saveStatsToFirestore(count) {
            if (!currentUser) return;

            try {
                const statsRef = doc(db, 'users', currentUser.uid, 'toolStats', 'uuidGenerator');
                const statsDoc = await getDoc(statsRef);

                if (statsDoc.exists()) {
                    await updateDoc(statsRef, {
                        totalGenerated: increment(count),
                        lastUsed: new Date()
                    });
                } else {
                    await setDoc(statsRef, {
                        totalGenerated: count,
                        lastUsed:  new Date()
                    });
                }
            } catch (error) {
                console.error('Error saving stats:', error);
            }
        }

        // Load stats from Firestore
        async function loadStats() {
            if (!currentUser) return;

            try {
                const statsRef = doc(db, 'users', currentUser. uid, 'toolStats', 'uuidGenerator');
                const statsDoc = await getDoc(statsRef);

                if (statsDoc.exists()) {
                    const data = statsDoc.data();
                    totalGenerated = data.totalGenerated || 0;
                    document.getElementById('totalGenerated').textContent = totalGenerated;
                }
            } catch (error) {
                console.error('Error loading stats:', error);
            }
        }

        // Toast notification
        function showToast(message) {
            const toast = document.createElement('div');
            toast.style.cssText = `
                position: fixed;
                bottom: 2rem;
                right: 2rem;
                background: rgba(0, 246, 255, 0.9);
                color: var(--brand-primary);
                padding: 1rem 1. 5rem;
                border-radius: 0.5rem;
                font-weight: 600;
                z-index: 1000;
                animation: slideIn 0.3s ease;
            `;
            toast.textContent = message;
            document.body.appendChild(toast);

            setTimeout(() => {
                toast.style.animation = 'slideOut 0.3s ease';
                setTimeout(() => document.body.removeChild(toast), 300);
            }, 2000);
        }

        // Add CSS animations
        const style = document.createElement('style');
        style.textContent = `
            @keyframes slideIn {
                from { transform: translateX(400px); opacity: 0; }
                to { transform: translateX(0); opacity: 1; }
            }
            @keyframes slideOut {
                from { transform: translateX(0); opacity: 1; }
                to { transform: translateX(400px); opacity: 0; }
            }
        `;
        document.head.appendChild(style);
    </script>
</body>
</html>
